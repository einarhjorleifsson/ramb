% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/dc_spread_cash_and_catch.R
\name{dc_spread_cash_and_catch}
\alias{dc_spread_cash_and_catch}
\title{Allocate Landings from Events to Trails}
\usage{
dc_spread_cash_and_catch(trails, events, remove_diagnostic = TRUE)
}
\arguments{
\item{trails}{A data frame containing fishing trail records. **Required columns:**
\itemize{
  \item{\code{.pid}:} {integer, unique trail identifier}
  \item{\code{VE_COU}:} {character, vessel country}
  \item{\code{VE_REF}:} {character, vessel reference}
  \item{\code{SI_DATIM}:} {POSIXct/datetime, timestamp}
  \item{\code{FT_REF}:} {character, fishing trip reference}
  \item{\code{LE_RECT}:} {character, ICES rectangle}
  \item{\code{SI_STATE}:} {integer, state (must be 0 or 1)}
}}

\item{events}{A data frame containing landing event records. **Required columns:**
\itemize{
  \item{\code{.eid}:} {integer, unique event identifier}
  \item{\code{VE_COU}:} {character, vessel country}
  \item{\code{VE_REF}:} {character, vessel reference}
  \item{\code{FT_REF}:} {character, fishing trip reference}
  \item{\code{LE_CDAT}:} {Date, event date}
  \item{\code{LE_RECT}:} {character, ICES rectangle}
  \item{\code{LE_KG}:} {numeric, landed weight in kg}
  \item{\code{LE_EURO}:} {numeric, landed value in euro}
}}
}
\value{
A data frame similar to \code{trails}, with updated \code{LE_KG}, \code{LE_EURO},
  and a column \code{.how} indicating the allocation step.
}
\description{
This function allocates landing event weights (`LE_KG`) and values (`LE_EURO`)
from the `events` data frame to the corresponding fishing trails in the `trails`
data frame using a hierarchical matching and allocation strategy.
}
\details{
The function allocates event landings to trails using three hierarchical steps:
\enumerate{
  \item Joins by trip, rectangle, day, and state.
  \item Joins remaining unmatched records by trip, rectangle, year, and state.
  \item Joins remaining unmatched records by trip, year, and state, allocating only the remaining events.
}
}
\examples{
\dontrun{
out <- allocate_landings(trails, events)
}
}
